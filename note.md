# 笔记


## 内存分配与泄露

指令：valgrind --leak-check=full ./a.out

delete释放一个new[]数组：这是一个危险的未定义行为，在不同的编译器上可能有不同的行为，可能导致内存泄漏。

我的实际操作：delete可以释放一个数组，不是编译器的优化也不是随机行为，而是`new[]` 分配内存时会在内存块头部存储数组大小信息，运行库时找到这个信息并释放内存，但这是一种危险的错误行为，若是类对象数组，就只调用第一个对象的析构函数。

## C和C++的异常处理机制有哪些

### C语言

- **返回值检查**
- **errno 全局变量**，使用 errno.h 中定义的全局错误码
- 处理运行时异常信号：signal(SIGSEGV, signal_handler); // 注册段错误信号处理器
- **错误处理函数** 检查返回值后，自定义错误处理函数

### C++

- try-catch
- 使用 noexcept，throw抛出异常对象，
